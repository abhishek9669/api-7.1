<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <title>Document</title>
    </head>
    <body>
       
             
             
           
        <button class="btn btn-info a_mybutton">Get Code</button>
        <div class="d-flex justify-content-center a1">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>

        <script>
            document.querySelector('.a1').classList.add('invisible');
            document.querySelector('.a_mybutton').addEventListener('click',function(){
                if(document.querySelector('.a1').classList.contains('invisible')){
                    console.log('true');
                    document.querySelector('.a1').classList.remove('invisible');
                    document.querySelector('.a1').classList.add('visible');

                }else{
                    console.log('false');
                    loader.classList.remove('visible');
                    loader.classList.add('invisible');
                }
                //alert('ovfzdjyubbk')

               
              



                let p = new Promise(function(resolve,reject){
                    $.ajax({
                    url:'https://fakerestapi.azurewebsites.net/api/v1/CoverPhotos',
                    type:'GET',
                    success:function(result,status,xhr){
                            //console.log(result);
                            resolve(result);
                        },
                        error:function(xhr,status,error){
                            reject(error);
                        } 
                });
          

                });


                p.then(function(data){
                    console.log(data);
                    //succses
                    tr = ` <table class="table">
                            <thead>
                            <tr>
                                <th scope="col">Id</th>
                                <th scope="col">Id book</th>
                                <th scope="col">Url</th>
                                <th scope="col">Action</th>
                            </tr>
                            </thead>
                            <tbody>`;
                    data.forEach(e => {
                        console.log(e);
                        tr = tr + `
                        <tr>
                            <td>`+e.id+`</td>
                            <td>`+e.idBook+`</td>
                            <td>`+e.url+`</td>
                            <td>
                                <button class="btn btn-success btn-sm">View</button>    
                                    <button class="btn btn-info btn-sm">Edit</button>    
                                    <button class="btn btn-danger btn-sm">Delete</button>   </td>
                        </tr>`;
                        
                    });
                    tr = tr + ` </tbody>
                      </table>`;
                    console.log(tr);
                    document.body.innerHTML=tr;

                }).catch(function(error){
                    //error

                });
            });

               
               
        </script>
        
    </body>
</html>
